{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Ojuju:wght@200..800&family=Orbitron:wght@400..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    {% tailwind_css %}
  </head>
  <body>
    <style>
      * {
        -webkit-user-select: none; 
        -moz-user-select: none; 
        -ms-user-select: none; 
        user-select: none; 
      }
      .logo {
        font-family: "Roboto", sans-serif;
        font-weight: 700;
      }
      .user-menu > div, .bubblechat {
        display: flex;
        height: 2rem;
        width: 2rem;
        color: white;
        align-items: center;
      }
    </style>
    <div class="flex justify-center">
      <nav class="flex h-16 w-[850px] bg-slate-50 items-center rounded-b-3xl shadow-xl">
        <div class="flex mx-6 w-full h-full justify-between items-center">
          <div class="logo text-4xl text-indigo-900"><a href="/">GXTrade</a></div>
          <div class="access-management-section">
            {% if user.is_authenticated %}
            <div class="user-panel flex">
              <div class="user-menu flex mr-3 justify-between items-center">
                <a href="#chat">
                  <div class="bubblechat">
                    <span class="material-symbols-outlined text-black hover:text-gray-300"> chat </span>
                  </div>
                </a>
              </div>
              <div class="avatar-container relative cursor-pointer">
                <img
                  class="inline-block h-8 w-8 rounded-full ring-2 ring-gray-300 hover:ring-slate-50"
                  src="https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                  alt=""
                />
                <!-- Hier ist das Dropdownmenu -->
                <div class="z-9999 user-dropdown hidden absolute w-48 mt-2 py-2 right-0 bg-white rounded-lg shadow-md divide-y divide-gray-100">
                  <a href="#shopcard" class="block px-4 py-2 text-gray-800 hover:bg-indigo-500 hover:text-white">
                    <div class="flex items-center">
                      <span class="material-symbols-outlined text-base">
                        shopping_cart
                      </span>
                      <p class="ml-2">Shopping Card</p>
                    </div>
                  </a>
  
                  <a href="#settings" class="block px-4 py-2 text-gray-800 hover:bg-indigo-500 hover:text-white">
                    <div class="flex items-center">
                      <span class="material-symbols-outlined text-base">
                        settings
                      </span>
                      <p class="ml-2">Settings</p>
                    </div>
                  </a>
  
                  <a href="/sign-out" class="block px-4 py-2 text-gray-800 hover:bg-indigo-500 hover:text-white">
                    <div class="flex items-center">
                      <span class="material-symbols-outlined text-base">
                        logout
                      </span>
                      <p class="ml-2">Sign Out</p>
                    </div>
                  </a>
                </div>
              </div>
            </div>
            {% else %}
              <a href="/sign-in" class="flex px-2 py-1 font-medium text-gray-800  rounded-lg justify-center items-center">
                Sign In&nbsp;<span aria-hidden="true">&rarr;</span>
              </a>
            {% endif %}
          </div>
        </div>
      </nav>
    </div>
    <script>

      document.addEventListener("click", function(event){
        let dropdown = document.querySelector(".user-dropdown");
        let avatar = document.querySelector(".avatar-container");
        // hide & show dropdown events
        if (avatar.contains(event.target) && !dropdown.contains(event.target) ){
          if (!dropdown.classList.contains("hidden")){
            dropdown.classList.add("hidden")
          }else{
            dropdown.classList.remove("hidden")
          }
        }else if(!dropdown.contains(event.target)){

          dropdown.classList.add("hidden")
        }
      })
    </script>
    {% block content %}{% endblock %}
  </body>
</html>
